
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../01-intro/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Módulo 2 - Workshop ADK</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#modulo-2-creando-tu-primer-agente-con-adk" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Workshop ADK" class="md-header__button md-logo" aria-label="Workshop ADK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Workshop ADK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Módulo 2
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Workshop ADK" class="md-nav__button md-logo" aria-label="Workshop ADK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Workshop ADK
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Módulo 1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Módulo 2
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Módulo 2
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#que-construiremos" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 ¿Qué construiremos?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerrequisitos" class="md-nav__link">
    <span class="md-ellipsis">
      📋 Prerrequisitos
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#que-construiremos" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 ¿Qué construiremos?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerrequisitos" class="md-nav__link">
    <span class="md-ellipsis">
      📋 Prerrequisitos
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="modulo-2-creando-tu-primer-agente-con-adk">🏆 Módulo 2: Creando tu Primer Agente con ADK</h1>
<p>En este módulo aprenderás a construir tu primer agente conversacional usando Google ADK. Crearemos un agente especializado en responder preguntas sobre la Copa Mundial de la FIFA, utilizando Gemini 2.0 Flash como modelo base.</p>
<h2 id="que-construiremos">🎯 ¿Qué construiremos?</h2>
<p>Un agente inteligente que puede responder preguntas como:
- "¿Quién ganó la Copa del Mundo de 2014?"
- "¿Cuántos goles anotó Messi en 2022?"
- "¿Qué país tiene más Copas del Mundo?"
- "Cuéntame algo interesante sobre Ronaldo" (modo diversión con easter eggs)</p>
<h2 id="prerrequisitos">📋 Prerrequisitos</h2>
<p>Antes de comenzar, asegúrate de tener:</p>
<ol>
<li><strong>Python 3.9+</strong> instalado</li>
<li><strong>Google ADK</strong> instalado (<code>pip install google-adk</code>)</li>
<li><strong>Acceso a Vertex AI</strong> y credenciales configuradas</li>
<li><strong>Conocimientos básicos</strong> de Python</li>
</ol>
<h1 id="un-poco-de-teoria">Un poco de teoria</h1>
<p>Perfecto. A continuación te presento una <strong>introducción teórica</strong> clara y ordenada que puedes usar al comienzo del episodio para contextualizar el proyecto. Esta sección explica qué es un agente, qué es el modelo <strong>Gemini 2.0 Flash</strong>, y cómo se conecta todo con el framework <strong>Google ADK</strong>.</p>
<hr />
<h2 id="introduccion-teorica-que-es-el-fifa-world-cup-agent">🎓 Introducción Teórica: ¿Qué es el FIFA World Cup Agent?</h2>
<p>Antes de entrar en la implementación, es importante entender <strong>qué tecnologías hay detrás</strong> de este agente y <strong>por qué fueron elegidas</strong>.</p>
<hr />
<h3 id="que-es-un-agente-inteligente">🤖 ¿Qué es un agente inteligente?</h3>
<p>Un <strong>agente inteligente</strong> es un programa que puede recibir información, procesarla, tomar decisiones y responder de forma autónoma, como si tuviera “sentido común” dentro de un dominio específico.</p>
<p>En este caso, el agente está diseñado para ser experto en <strong>todo lo relacionado con la Copa Mundial de la FIFA</strong>, desde datos históricos hasta estadísticas avanzadas y curiosidades.</p>
<hr />
<h3 id="que-es-gemini-20-flash">🧠 ¿Qué es Gemini 2.0 Flash?</h3>
<p>Gemini 2.0 Flash es un modelo de lenguaje desarrollado por Google, parte de la familia Gemini (antes Bard). Estos modelos están entrenados con <strong>billones de datos</strong> y son capaces de:</p>
<ul>
<li>Entender preguntas en lenguaje natural</li>
<li>Generar respuestas coherentes, útiles y detalladas</li>
<li>Recordar hechos históricos, estadísticas y eventos complejos</li>
</ul>
<p>La variante <strong>Flash</strong> está optimizada para ser más <strong>rápida y ligera</strong>, ideal para tareas interactivas como las de este agente. Se usa como el "cerebro" del sistema, respondiendo a preguntas como:</p>
<ul>
<li>“¿Quién ganó el Mundial de 2014?”</li>
<li>“¿Cuántos goles hizo Messi en Qatar 2022?”</li>
<li>“Cuéntame una curiosidad de Brasil en los Mundiales”</li>
</ul>
<hr />
<h2 id="uso-correcto-de-pydantic">✅ Uso correcto de <strong>Pydantic</strong></h2>
<p><strong>¿Qué es Pydantic?</strong>
Es una librería de Python que ayuda a definir y validar datos fácilmente usando clases. Se usa mucho cuando quieres que tu código sea <strong>más robusto, predecible y limpio</strong>, especialmente al trabajar con configuraciones o modelos de datos.</p>
<p><strong>En ADK</strong>, los agentes heredan de una clase que internamente usa Pydantic. Esto quiere decir que:</p>
<ul>
<li>Todo lo que definas dentro del agente <strong>debe cumplir con reglas de Pydantic</strong>.</li>
<li>No puedes agregar atributos al azar después de crear el objeto, a menos que los definas como <strong>privados</strong> (con <code>_</code> al inicio) o como <strong>campos válidos</strong>.</li>
</ul>
<p><strong>Por eso usamos <code>_fifa_tools</code> y no <code>fifa_tools</code></strong>:</p>
<pre><code class="language-python">self._fifa_tools = FIFATools()  # ✅ correcto (Pydantic no se queja)
self.fifa_tools = FIFATools()   # ❌ da error porque no es un campo válido
</code></pre>
<h2 id="resumen-de-arquitectura">🏗️ Resumen de Arquitectura</h2>
<pre><code>┌────────────────────────────────────────────────────────────┐
│                 Agente Copa Mundial FIFA                   │
├────────────────────────────────────────────────────────────┤
│  ┌────────────────┐    ┌────────────────┐                 │
│  │ FIFAWorldCup   │    │ FIFATools      │                 │
│  │ Agent (agente) │◄───┤ Herramientas   │                 │
│  └────────────────┘    └────────────────┘                 │
│         │                      │                           │
│         ▼                      ▼                           │
│  ┌────────────────┐    ┌────────────────┐                 │
│  │ Gemini 2.0     │    │ Sistema de     │                 │
│  │ Flash (modelo) │    │ Activación     │                 │
│  │                │    │ de Conocimiento│                 │
│  └────────────────┘    └────────────────┘                 │
├────────────────────────────────────────────────────────────┤
│             Framework de Google ADK                        │
│  ┌────────────────┐    ┌────────────────┐                 │
│  │ LlmAgent       │    │ BaseAgent      │                 │
│  │ (clase base)   │    │ (Pydantic)     │                 │
│  └────────────────┘    └────────────────┘                 │
└────────────────────────────────────────────────────────────┘
</code></pre>
<hr />
<h2 id="como-se-conectan-todas-estas-piezas">🧩 ¿Cómo se conectan todas estas piezas?</h2>
<p>Aquí está el resumen simple:</p>
<table>
<thead>
<tr>
<th>Componente</th>
<th>Rol en el agente</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Gemini 2.0 Flash</strong></td>
<td>Provee el conocimiento (modelo de lenguaje)</td>
</tr>
<tr>
<td><strong>Google ADK</strong></td>
<td>Orquesta todo (framework de desarrollo)</td>
</tr>
<tr>
<td><strong>Herramientas internas (<code>FIFATools</code>)</strong></td>
<td>Activan conocimiento específico sin APIs externas</td>
</tr>
<tr>
<td><strong>Clase del agente (<code>FIFAWorldCupAgent</code>)</strong></td>
<td>Define cómo responde el sistema y qué herramientas usar</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="paso-1-configuracion-del-entorno">🚀 Paso 1: Configuración del Entorno</h2>
<h3 id="11-crear-el-entorno-virtual">1.1 Crear el entorno virtual</h3>
<pre><code class="language-bash"># Crear entorno virtual
python -m venv venv-fifa-agent

# Activar entorno (Linux/Mac)
source venv-fifa-agent/bin/activate

# Activar entorno (Windows)
venv-fifa-agent\Scripts\activate
</code></pre>
<h3 id="12-instalar-dependencias">1.2 Instalar dependencias</h3>
<pre><code class="language-bash">pip install google-adk
pip install google-cloud-aiplatform
</code></pre>
<h3 id="13-configurar-autenticacion">1.3 Configurar autenticación</h3>
<p>Tienes dos opciones para autenticarte:</p>
<p><strong>Opción A: Usar API Key (Recomendado para desarrollo)</strong></p>
<pre><code class="language-bash"># Configurar tu API key como variable de entorno
export GOOGLE_API_KEY=&quot;&lt;key&gt;&quot;

# Para Windows
set GOOGLE_API_KEY=&lt;key&gt;
</code></pre>
<p><strong>Opción B: Usar Google Cloud SDK</strong></p>
<pre><code class="language-bash"># Configurar credenciales de Google Cloud
gcloud auth application-default login

# Verificar proyecto
gcloud config get-value project
</code></pre>
<h2 id="estructura-del-codigo">📁 Estructura del Código</h2>
<pre><code>fifa_agent/
├── __init__.py          # Inicialización del paquete para ADK Web
├── agent.py             # Clase principal del agente
├── config.py            # Configuraciones y constantes
├── fifa_tools.py        # Herramientas para activar conocimiento
└── README.md            # Documentación del proyecto
</code></pre>
<hr />
<h2 id="explicacion-paso-a-paso">🔍 Explicación Paso a Paso</h2>
<h3 id="1-capa-de-configuracion-configpy">1. Capa de Configuración (<code>config.py</code>)</h3>
<p>Administra centralmente todas las configuraciones, soportando variables de entorno:</p>
<pre><code class="language-python">MODEL_CONFIG = {
    &quot;model_name&quot;: &quot;gemini-2.0-flash&quot;,
    &quot;project_id&quot;: os.getenv(&quot;GOOGLE_CLOUD_PROJECT&quot;),
    &quot;api_key&quot;: os.getenv(&quot;GOOGLE_API_KEY&quot;),
    &quot;location&quot;: &quot;us-central1&quot;,
    &quot;temperature&quot;: 0.7,
    &quot;max_output_tokens&quot;: 1000,
}
</code></pre>
<ul>
<li>Compatible con API key o Project ID</li>
<li>Parámetros ajustados para respuestas fiables</li>
</ul>
<hr />
<h3 id="2-sistema-de-activacion-de-conocimiento-fifa_toolspy">2. Sistema de Activación de Conocimiento (<code>fifa_tools.py</code>)</h3>
<p>Este módulo no hace peticiones externas. En su lugar, activa el conocimiento interno del modelo Gemini:</p>
<pre><code class="language-python">async def search_world_cup_info(self, query: str, year: Optional[int] = None) -&gt; Dict[str, Any]:
    return {
        &quot;action&quot;: &quot;use_gemini_knowledge&quot;,
        &quot;query&quot;: query,
        &quot;year&quot;: year,
        &quot;instruction&quot;: &quot;Usa tu conocimiento interno sobre la Copa del Mundo...&quot;
    }
</code></pre>
<p><strong>Ventajas</strong>:</p>
<ul>
<li>Respuestas más rápidas</li>
<li>Sin dependencia externa</li>
<li>Sin costos adicionales de APIs</li>
<li>Basado en el entrenamiento de Gemini</li>
</ul>
<hr />
<h3 id="3-clase-principal-del-agente-agentpy">3. Clase Principal del Agente (<code>agent.py</code>)</h3>
<p>Orquesta toda la funcionalidad del agente. El flujo de inicialización es:</p>
<ol>
<li>Configura el modelo Gemini</li>
<li>Aplica autenticación flexible</li>
<li>Inicializa el modelo</li>
<li>Llama al constructor de la clase padre (<code>LlmAgent</code>)</li>
<li>Carga las herramientas (<code>FIFATools</code>)</li>
<li>Registra las herramientas en el framework</li>
</ol>
<p>Cada herramienta se define así:</p>
<pre><code class="language-python">async def search_world_cup_info(self, query: str, year: Optional[int] = None) -&gt; Dict[str, Any]:
    return await self._fifa_tools.search_world_cup_info(query, year)
</code></pre>
<hr />
<h3 id="4-modos-de-ejecucion">4. Modos de Ejecución</h3>
<h4 id="a-modo-cli-interactivo-por-consola">a. Modo CLI (interactivo por consola)</h4>
<pre><code class="language-python">async def main():
    agent = FIFAWorldCupAgent()
    while True:
        query = input(&quot;👤 Tu pregunta: &quot;).strip()
        response = await agent.run(query, context)
        print(f&quot;🏆 Agente: {response}\n&quot;)
</code></pre>
<h4 id="b-modo-web-con-adk">b. Modo Web con ADK</h4>
<pre><code class="language-python">def get_agent():
    return FIFAWorldCupAgent()

root_agent = get_agent()
</code></pre>
<hr />
<h2 id="buenas-practicas-aplicadas">🚀 Buenas Prácticas Aplicadas</h2>
<ul>
<li>✅ Uso correcto de <code>Pydantic</code></li>
<li>✅ Registro de herramientas con <code>self.tools.extend()</code></li>
<li>✅ Separación clara entre configuración, lógica y herramientas</li>
<li>✅ Métodos asíncronos para consistencia</li>
<li>✅ Soporte bilingüe (respuestas en español)</li>
<li>✅ Código organizado y documentado</li>
</ul>
<h2 id="ejemplos-de-uso">💡 Ejemplos de Uso</h2>
<h3 id="preguntas-basicas">Preguntas Básicas</h3>
<pre><code>👤 ¿Quién ganó el Mundial de 2018?
🏆 Francia ganó la Copa del Mundo de 2018...

👤 ¿Cuántos goles hizo Pelé en Mundiales?
🏆 Pelé anotó 12 goles en 4 Copas del Mundo...

👤 ¿Qué país tiene más títulos?
🏆 Brasil lidera con 5 títulos mundiales...
</code></pre>
<h3 id="consultas-avanzadas">Consultas Avanzadas</h3>
<pre><code>👤 Cuéntame sobre la final de 2022
🏆 La final entre Argentina y Francia fue histórica...

👤 ¿Qué records tiene Messi?
🏆 Lionel Messi ha logrado varios récords en Copas...

👤 Datos curiosos sobre Brasil
🏆 Brasil es el único país que ha jugado todos los mundiales...
</code></pre>
<hr />
<h2 id="variables-de-entorno">🌍 Variables de Entorno</h2>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Obligatoria</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GOOGLE_API_KEY</code></td>
<td>Opcional*</td>
<td>Clave API para Gemini</td>
<td><code>AIza...</code></td>
</tr>
<tr>
<td><code>GOOGLE_CLOUD_PROJECT</code></td>
<td>Opcional*</td>
<td>ID del proyecto en Google Cloud</td>
<td><code>mi-proyecto-123</code></td>
</tr>
</tbody>
</table>
<p>*Una de las dos es requerida.</p>
<h2 id="personalizacion">🔧 Personalización</h2>
<h3 id="agregar-nuevas-herramientas">Agregar nuevas herramientas</h3>
<ol>
<li>En <code>FIFATools</code>:</li>
</ol>
<pre><code class="language-python">async def nueva_funcion(self, parametro: str) -&gt; Dict[str, Any]:
    return {
        &quot;action&quot;: &quot;use_gemini_knowledge&quot;,
        &quot;instruction&quot;: &quot;Instrucción personalizada para Gemini&quot;
    }
</code></pre>
<ol>
<li>En <code>FIFAWorldCupAgent</code>:</li>
</ol>
<pre><code class="language-python">async def nueva_funcion(self, parametro: str) -&gt; Dict[str, Any]:
    return await self._fifa_tools.nueva_funcion(parametro)
</code></pre>
<ol>
<li>Registra la nueva herramienta:</li>
</ol>
<pre><code class="language-python">self.tools.extend([
    self.nueva_funcion
])
</code></pre>
<h3 id="cambiar-el-comportamiento-del-agente">Cambiar el comportamiento del agente</h3>
<p>Edita <code>SYSTEM_PROMPT</code> en <code>config.py</code> para modificar el tono, objetivos o restricciones del agente.</p>
<hr />
<h2 id="licencia">📄 Licencia</h2>
<p>Este proyecto es una demostración del uso del Google Agent Development Kit (ADK) y sigue las buenas prácticas recomendadas por Google Cloud AI.</p>
<hr />
<p>¿Deseas que convierta este contenido en un script narrativo listo para grabación?</p>
<h2 id="paso-3-configurar-herramientas-para-gemini">🧠 Paso 3: Configurar Herramientas para Gemini</h2>
<p>En lugar de usar datos hardcodeados, vamos a crear herramientas que <strong>Gemini Flash 2.0</strong> usará para obtener información dinámica. Gemini será quien decida cuándo y cómo usar estas herramientas:</p>
<pre><code class="language-python"># fifa_tools.py

import requests
from typing import Dict, Any, Optional
import json

class FIFATools:
    &quot;&quot;&quot;Herramientas que Gemini usa para obtener información de la Copa del Mundo&quot;&quot;&quot;

    def __init__(self):
        # Gemini usará su conocimiento interno combinado con estas herramientas
        pass

    async def search_world_cup_info(self, query: str, year: Optional[int] = None) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Permite a Gemini buscar información específica sobre Mundiales.

        Args:
            query: Consulta específica (ej: &quot;ganador&quot;, &quot;goleador&quot;, &quot;final&quot;)
            year: Año del Mundial (opcional)

        Returns:
            Instrucción para que Gemini use su conocimiento interno
        &quot;&quot;&quot;
        return {
            &quot;action&quot;: &quot;use_gemini_knowledge&quot;,
            &quot;query&quot;: query,
            &quot;year&quot;: year,
            &quot;instruction&quot;: &quot;Usa tu conocimiento interno sobre la Copa del Mundo para responder esta consulta específica&quot;
        }

    async def get_player_statistics(self, player_name: str, context: str = &quot;world_cup&quot;) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Permite a Gemini proporcionar estadísticas de jugadores.

        Args:
            player_name: Nombre del jugador
            context: Contexto (ej: &quot;world_cup&quot;, &quot;career&quot;, &quot;specific_year&quot;)

        Returns:
            Instrucción para que Gemini use su conocimiento interno
        &quot;&quot;&quot;
        return {
            &quot;action&quot;: &quot;use_gemini_knowledge&quot;,
            &quot;player&quot;: player_name,
            &quot;context&quot;: context,
            &quot;instruction&quot;: &quot;Proporciona estadísticas detalladas de este jugador en Copas del Mundo usando tu conocimiento interno&quot;
        }

    async def get_country_performance(self, country: str) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Permite a Gemini proporcionar información sobre el rendimiento de países.

        Args:
            country: Nombre del país

        Returns:
            Instrucción para que Gemini use su conocimiento interno
        &quot;&quot;&quot;
        return {
            &quot;action&quot;: &quot;use_gemini_knowledge&quot;,
            &quot;country&quot;: country,
            &quot;instruction&quot;: &quot;Proporciona información completa sobre el rendimiento de este país en Copas del Mundo&quot;
        }

    async def get_fun_facts(self, topic: str = &quot;general&quot;) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Permite a Gemini compartir datos curiosos sobre la Copa del Mundo.

        Args:
            topic: Tema específico (ej: &quot;records&quot;, &quot;history&quot;, &quot;players&quot;)

        Returns:
            Instrucción para que Gemini use su conocimiento interno
        &quot;&quot;&quot;
        return {
            &quot;action&quot;: &quot;use_gemini_knowledge&quot;,
            &quot;topic&quot;: topic,
            &quot;instruction&quot;: &quot;Comparte datos curiosos e interesantes sobre la Copa del Mundo relacionados con este tema&quot;
        }
</code></pre>
<h2 id="paso-4-configuracion-del-agente">⚙️ Paso 4: Configuración del Agente</h2>
<p>Crea el archivo de configuración:</p>
<pre><code class="language-python"># config.py

import os

# Configuración del modelo
MODEL_CONFIG = {
    &quot;model_name&quot;: &quot;gemini-2.0-flash-exp&quot;,
    &quot;project_id&quot;: os.getenv(&quot;GOOGLE_CLOUD_PROJECT&quot;),  # Solo si usas gcloud
    &quot;api_key&quot;: os.getenv(&quot;GOOGLE_API_KEY&quot;),          # Para API key
    &quot;location&quot;: &quot;us-central1&quot;,
    &quot;temperature&quot;: 0.7,
    &quot;max_output_tokens&quot;: 1000,
}

# Configuración del agente
AGENT_CONFIG = {
    &quot;name&quot;: &quot;FIFA World Cup Expert&quot;,
    &quot;description&quot;: &quot;Experto en Copa Mundial de la FIFA con conocimientos actualizados y datos curiosos&quot;,
    &quot;version&quot;: &quot;1.0.0&quot;,
}

# Prompt del sistema
SYSTEM_PROMPT = &quot;&quot;&quot;
Eres un experto en la Copa Mundial de la FIFA con acceso a herramientas especializadas.

HERRAMIENTAS DISPONIBLES:
- search_world_cup_info(query, year): Busca información específica sobre Mundiales
- get_player_statistics(player, context): Obtiene estadísticas de jugadores
- get_country_performance(country): Información sobre rendimiento por país
- get_fun_facts(topic): Datos curiosos sobre temas específicos

INSTRUCCIONES IMPORTANTES:
1. **TU CONOCIMIENTO ES LA FUENTE PRINCIPAL**: Usa tu conocimiento interno sobre la Copa del Mundo como fuente principal de información
2. **Las herramientas son activadores**: Cuando se llame a una herramienta, úsala como señal para activar tu conocimiento interno sobre ese tema
3. **Respuestas completas y precisas**: Proporciona información detallada, estadísticas exactas y contexto histórico
4. **Combina información**: Mezcla datos específicos con contexto histórico y datos curiosos
5. **Respuestas conversacionales**: Mantén un tono amigable y educativo

EJEMPLOS DE USO:
- &quot;¿Quién ganó en 2014?&quot; → usar search_world_cup_info(&quot;ganador&quot;, 2014) + proporcionar contexto completo
- &quot;¿Cuántos goles hizo Messi en 2022?&quot; → usar get_player_statistics(&quot;Messi&quot;, &quot;world_cup&quot;) + detalles del torneo
- &quot;¿Qué país tiene más Mundiales?&quot; → usar get_country_performance() + ranking histórico
- &quot;Cuéntame sobre Ronaldo&quot; → usar get_player_statistics(&quot;Ronaldo&quot;) + get_fun_facts(&quot;players&quot;)

¡Proporciona información rica y detallada usando tu conocimiento interno!
&quot;&quot;&quot;
</code></pre>
<h2 id="paso-5-implementar-el-agente">🤖 Paso 5: Implementar el Agente</h2>
<p>Ahora vamos a crear el agente principal. <strong>La clave está en que Gemini es quien decide cuándo y cómo usar las herramientas</strong>:</p>
<h3 id="diferencia-clave-gemini-flash-20-como-fuente-principal">🔑 Diferencia Clave: Gemini Flash 2.0 como Fuente Principal</h3>
<p>❌ <strong>Enfoque incorrecto</strong>: Hardcodear respuestas y limitar a Gemini
✅ <strong>Enfoque correcto</strong>: Gemini Flash 2.0 usa su conocimiento interno + herramientas como activadores</p>
<p>Nuestro agente funciona así:
1. <strong>Usuario hace pregunta</strong> → Gemini Flash 2.0 recibe la pregunta
2. <strong>Gemini analiza</strong> → Decide si necesita activar herramientas específicas
3. <strong>Herramientas como activadores</strong> → Señalan a Gemini qué tipo de información proporcionar
4. <strong>Gemini responde</strong> → Usa su conocimiento interno para dar respuestas completas y precisas</p>
<pre><code class="language-python"># agent.py

import asyncio
from typing import Dict, Any, Optional
from google.adk import Agent, AgentConfig, Model
from google.adk.core import Context
from fifa_tools import FIFATools
from config import MODEL_CONFIG, AGENT_CONFIG, SYSTEM_PROMPT

class FIFAWorldCupAgent(Agent):
    &quot;&quot;&quot;Agente especializado en Copa Mundial de la FIFA que usa Gemini Flash 2.0 como fuente principal&quot;&quot;&quot;

    def __init__(self):
        # Configurar el modelo
        model_kwargs = {
            &quot;model_name&quot;: MODEL_CONFIG[&quot;model_name&quot;],
            &quot;location&quot;: MODEL_CONFIG[&quot;location&quot;],
            &quot;temperature&quot;: MODEL_CONFIG[&quot;temperature&quot;],
            &quot;max_output_tokens&quot;: MODEL_CONFIG[&quot;max_output_tokens&quot;]
        }

        # Usar API key o project_id según lo disponible
        if MODEL_CONFIG[&quot;api_key&quot;]:
            model_kwargs[&quot;api_key&quot;] = MODEL_CONFIG[&quot;api_key&quot;]
        elif MODEL_CONFIG[&quot;project_id&quot;]:
            model_kwargs[&quot;project_id&quot;] = MODEL_CONFIG[&quot;project_id&quot;]

        model = Model(**model_kwargs)

        # Configurar el agente
        config = AgentConfig(
            name=AGENT_CONFIG[&quot;name&quot;],
            description=AGENT_CONFIG[&quot;description&quot;],
            version=AGENT_CONFIG[&quot;version&quot;],
            system_prompt=SYSTEM_PROMPT
        )

        super().__init__(config=config, model=model)

        # Inicializar herramientas
        self.fifa_tools = FIFATools()

        # Registrar herramientas que Gemini puede usar
        self.register_tool(self.search_world_cup_info)
        self.register_tool(self.get_player_statistics)
        self.register_tool(self.get_country_performance)
        self.register_tool(self.get_fun_facts)

    async def search_world_cup_info(self, query: str, year: Optional[int] = None) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Permite a Gemini buscar información específica sobre Mundiales.

        Args:
            query: Consulta específica (ej: &quot;ganador&quot;, &quot;goleador&quot;, &quot;final&quot;)
            year: Año del Mundial (opcional)

        Returns:
            Información que activa el conocimiento interno de Gemini
        &quot;&quot;&quot;
        return await self.fifa_tools.search_world_cup_info(query, year)

    async def get_player_statistics(self, player_name: str, context: str = &quot;world_cup&quot;) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Permite a Gemini proporcionar estadísticas de jugadores.

        Args:
            player_name: Nombre del jugador
            context: Contexto (ej: &quot;world_cup&quot;, &quot;career&quot;, &quot;specific_year&quot;)

        Returns:
            Información que activa el conocimiento interno de Gemini
        &quot;&quot;&quot;
        return await self.fifa_tools.get_player_statistics(player_name, context)

    async def get_country_performance(self, country: str) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Permite a Gemini proporcionar información sobre el rendimiento de países.

        Args:
            country: Nombre del país

        Returns:
            Información que activa el conocimiento interno de Gemini
        &quot;&quot;&quot;
        return await self.fifa_tools.get_country_performance(country)

    async def get_fun_facts(self, topic: str = &quot;general&quot;) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Permite a Gemini compartir datos curiosos sobre la Copa del Mundo.

        Args:
            topic: Tema específico (ej: &quot;records&quot;, &quot;history&quot;, &quot;players&quot;)

        Returns:
            Información que activa el conocimiento interno de Gemini
        &quot;&quot;&quot;
        return await self.fifa_tools.get_fun_facts(topic)

async def main():
    &quot;&quot;&quot;Función principal para probar el agente&quot;&quot;&quot;
    agent = FIFAWorldCupAgent()

    # Contexto básico
    context = Context()

    print(&quot;🏆 FIFA World Cup Agent - ¡Pregúntame sobre la Copa del Mundo!&quot;)
    print(&quot;Ejemplos: '¿Quién ganó en 2014?', '¿Cuántos goles hizo Messi en 2022?', '¿Qué país tiene más Mundiales?'&quot;)
    print(&quot;Escribe 'salir' para terminar.\n&quot;)

    while True:
        try:
            query = input(&quot;👤 Tu pregunta: &quot;).strip()

            if query.lower() in ['salir', 'exit', 'quit']:
                print(&quot;👋 ¡Hasta luego!&quot;)
                break

            if not query:
                continue

            print(&quot;🤖 Gemini está procesando tu pregunta...&quot;)
            # Ahora Gemini decide si usar herramientas y cómo responder
            response = await agent.run(query, context)
            print(f&quot;🏆 Agente: {response}\n&quot;)

        except KeyboardInterrupt:
            print(&quot;\n👋 ¡Hasta luego!&quot;)
            break
        except Exception as e:
            print(f&quot;❌ Error: {e}\n&quot;)

if __name__ == &quot;__main__&quot;:
    asyncio.run(main())
</code></pre>
<h2 id="paso-6-archivo-de-dependencias">🔧 Paso 6: Archivo de Dependencias</h2>
<p>Crea el archivo <code>requirements.txt</code>:</p>
<pre><code class="language-txt">google-adk&gt;=0.1.0
google-cloud-aiplatform&gt;=1.38.0
</code></pre>
<h2 id="paso-7-ejecutar-el-agente">🚀 Paso 7: Ejecutar el Agente</h2>
<h3 id="71-opcion-a-ejecutar-con-adk-web-recomendado">7.1 Opción A: Ejecutar con ADK Web (Recomendado)</h3>
<p>ADK Web proporciona una interfaz visual para probar agentes de forma más cómoda:</p>
<pre><code class="language-bash"># Ejecutar ADK Web
adk web

# O especificar el archivo del agente
adk web agent.py
</code></pre>
<p>Esto abrirá una interfaz web en <code>http://localhost:8080</code> donde podrás:
- 🗨️ Chatear con tu agente en tiempo real
- 🔍 Ver las llamadas a herramientas en detalle
- 📊 Monitorear el rendimiento del agente
- 🐛 Debuggear problemas fácilmente</p>
<h3 id="72-opcion-b-ejecutar-en-linea-de-comandos">7.2 Opción B: Ejecutar en línea de comandos</h3>
<pre><code class="language-bash">python agent.py
</code></pre>
<h2 id="paso-8-pruebas-de-ejemplo">🧪 Paso 8: Pruebas de Ejemplo</h2>
<p>Prueba tu agente con estas preguntas y observa cómo <strong>Gemini decide usar las herramientas</strong>:</p>
<h3 id="que-observar-durante-las-pruebas-en-adk-web">🔍 Qué observar durante las pruebas (en ADK Web):</h3>
<ol>
<li><strong>"¿Quién ganó la Copa del Mundo de 2014?"</strong></li>
<li>En ADK Web verás: Gemini llama a <code>search_world_cup_info("ganador", 2014)</code></li>
<li>
<p>Respuesta: Gemini proporciona información completa sobre Alemania vs Argentina, detalles del torneo, estadísticas y contexto histórico</p>
</li>
<li>
<p><strong>"¿Cuántos goles anotó Messi en 2022?"</strong></p>
</li>
<li>En ADK Web verás: Gemini llama a <code>get_player_statistics("Messi", "world_cup")</code></li>
<li>
<p>Respuesta: Gemini proporciona estadísticas detalladas de Messi en Qatar 2022, incluyendo goles, asistencias, partidos y logros</p>
</li>
<li>
<p><strong>"¿Qué país tiene más Copas del Mundo?"</strong></p>
</li>
<li>En ADK Web verás: Gemini llama a <code>get_country_performance()</code> para varios países</li>
<li>
<p>Respuesta: Gemini proporciona ranking completo con Brasil (5), Alemania (4), Italia (4), etc., con contexto histórico</p>
</li>
<li>
<p><strong>"Cuéntame algo interesante sobre Ronaldo"</strong></p>
</li>
<li>En ADK Web verás: Gemini llama a <code>get_player_statistics("Ronaldo")</code> Y <code>get_fun_facts("players")</code></li>
<li>Respuesta: Gemini proporciona estadísticas completas de Ronaldo en Mundiales + datos curiosos sobre su carrera</li>
</ol>
<h3 id="ventajas-de-probar-con-adk-web">🎯 Ventajas de probar con ADK Web:</h3>
<ul>
<li><strong>Visualización de herramientas</strong> → Ves exactamente qué función llama Gemini</li>
<li><strong>Tiempo de respuesta</strong> → Monitor del rendimiento en tiempo real</li>
<li><strong>Debugging visual</strong> → Identificar problemas fácilmente</li>
<li><strong>Interfaz amigable</strong> → Mejor experiencia que la línea de comandos</li>
<li><strong>Logs detallados</strong> → Historial completo de conversaciones</li>
</ul>
<h3 id="comportamiento-esperado">🎯 Comportamiento esperado:</h3>
<ul>
<li><strong>Gemini lee la pregunta</strong> → Decide qué herramientas usar como activadores</li>
<li><strong>Respuestas naturales</strong> → Información completa y conversación fluida</li>
<li><strong>Conocimiento interno</strong> → Gemini usa su amplio conocimiento sobre fútbol y Mundiales</li>
<li><strong>Información dinámica</strong> → Respuestas actualizadas y precisas sin limitaciones de datos hardcodeados</li>
</ul>
<h2 id="paso-9-mejoras-opcionales">🎯 Paso 9: Mejoras Opcionales</h2>
<h3 id="91-agregar-mas-datos">9.1 Agregar más datos</h3>
<p>Expande <code>fifa_knowledge.py</code> con:
- Más años de Mundiales
- Estadísticas de más jugadores
- Récords adicionales</p>
<h3 id="92-mejorar-el-procesamiento">9.2 Mejorar el procesamiento</h3>
<ul>
<li>Usar NLP para mejor comprensión de consultas</li>
<li>Implementar búsqueda difusa para nombres</li>
<li>Agregar soporte para múltiples idiomas</li>
</ul>
<h3 id="93-tips-para-usar-adk-web-eficientemente">9.3 Tips para usar ADK Web eficientemente</h3>
<p><strong>🔧 Configuración recomendada:</strong></p>
<pre><code class="language-python"># Para mejor debugging en ADK Web, añade logging
import logging

# Configurar logging detallado
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

class FIFAWorldCupAgent(Agent):
    def __init__(self):
        super().__init__(config=config, model=model)
        self.logger = logging.getLogger(__name__)

    async def get_world_cup_info(self, year: int) -&gt; Dict[str, Any]:
        self.logger.info(f&quot;Buscando información del Mundial {year}&quot;)
        # ... resto del código
</code></pre>
<p><strong>🎯 Funcionalidades avanzadas en ADK Web:</strong></p>
<ul>
<li><strong>Modo debug</strong>: Activa para ver logs detallados</li>
<li><strong>Historial de herramientas</strong>: Revisa qué funciones se llamaron</li>
<li><strong>Métricas de rendimiento</strong>: Tiempo de respuesta por herramienta</li>
<li><strong>Export de conversaciones</strong>: Guarda sesiones para análisis</li>
</ul>
<h2 id="felicitaciones">🎉 ¡Felicitaciones!</h2>
<p>Has creado tu primer agente con Google ADK. Este agente puede:</p>
<p>✅ Responder preguntas específicas sobre Mundiales
✅ Proporcionar estadísticas de jugadores famosos
✅ Mostrar datos curiosos y easter eggs
✅ Usar herramientas personalizadas para acceder a datos
✅ Procesar consultas en lenguaje natural</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>